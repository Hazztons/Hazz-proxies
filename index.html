<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/jpg" href="favicon.jpg" />
  <link rel="icon" type="image/png" href="favicon.png" />
  <title>HAZZ</title>
  <link href="https://fonts.googleapis.com/css2?family=Lexend&display=swap" rel="stylesheet" />
  <style>
    html, body {
      margin: 0; padding: 0; height: 100%; background: black; overflow: hidden;
      font-family: 'Lexend', sans-serif; color: white;
    }
    #starsCanvas {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: black;
      z-index: 0;
    }
    .menu {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 24px;
      font-weight: bold;
      color: #b084f9;
      text-shadow: 0 0 10px #b084f9, 0 0 20px #b084f9;
      z-index: 10;
      display: flex;
      gap: 30px;
      justify-content: center;
    }
    .menu span {
      border-bottom: 2px solid #b084f9;
      padding-bottom: 4px;
      cursor: pointer;
    }
    .titleContainer {
      position: absolute;
      top: 35%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      z-index: 2;
      transition: opacity 0.5s ease;
    }
    .titleContainer.hidden {
      opacity: 0;
      pointer-events: none;
    }
    .title {
      font-size: 48px;
      font-weight: bold;
      color: #b084f9;
      text-shadow: 0 0 10px #b084f9, 0 0 20px #b084f9;
      margin-bottom: 10px;
      /* Remove the fadeIn animation since typing will replace it */
    }
    .searchBar {
      background-color: #1e1e1e;
      border: 2px solid #b084f9;
      padding: 10px;
      border-radius: 10px;
      color: white;
      width: 300px;
      font-size: 16px;
      transition: border-color 0.3s ease;
    }
    .searchBar:focus {
      outline: none;
      border-color: #d4a4ff;
      box-shadow: 0 0 10px rgba(176, 132, 249, 0.3);
    }
    .searchBar.searching {
      border-color: #90EE90;
      box-shadow: 0 0 10px rgba(144, 238, 144, 0.3);
    }
    .imageAbove {
      width: 100px;
      margin: 0 auto 10px;
    }
    .imageAbove img {
      width: 100%;
    }
    /* Remove fadeIn keyframes since not used anymore */
    .gamesContainer {
      position: absolute;
      top: 70px;
      left: 0;
      width: 100%;
      height: calc(100% - 70px);
      overflow-y: auto;
      display: none;
      flex-wrap: wrap;
      justify-content: center;
      align-content: flex-start;
      padding: 100px 20px 20px;
      gap: 20px;
      z-index: 1;
    }
    .gameBox {
      width: 160px;
      height: 200px;
      background: #222;
      border: 2px solid #b084f9;
      border-radius: 12px;
      box-shadow: 0 0 10px #b084f9;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      font-size: 18px;
      color: white;
      cursor: pointer;
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .gameBox:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px #b084f9;
    }
    .gameImage {
      width: 100%;
      height: 120px;
      object-fit: cover;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
    }
    .gameTitle {
      padding: 10px;
      text-align: center;
      font-size: 16px;
    }
    .gameViewer {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: black;
      z-index: 100;
      display: none;
    }
    .gameFrame {
      width: 100%;
      height: 100%;
      border: none;
    }
    .closeGame {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #b084f9;
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 20px;
      cursor: pointer;
      z-index: 101;
    }
  </style>
</head>
<body>
  <canvas id="starsCanvas"></canvas>

  <div class="menu">
    <span onclick="showSection('settings')">Settings</span>
    <span onclick="showSection('home')">Home</span>
    <span onclick="showSection('chat')">Chat</span>
    <span onclick="showSection('games')">Games</span>
  </div>

  <div class="titleContainer" id="titleContainer">
    <div class="imageAbove"><img src="https://i.pinimg.com/736x/c2/5c/1e/c25c1e075a20aa4b40dc92d3d685c0bb.jpg" alt="logo" /></div>
    <div class="title" id="mainTitle"></div>
    <input class="searchBar" placeholder="Search or enter URL..." />
  </div>

  <div class="gamesContainer" id="gamesContainer"></div>

  <div class="gameViewer" id="gameViewer">
    <button class="closeGame" onclick="closeGame()">×</button>
    <iframe class="gameFrame" id="gameFrame" allowfullscreen></iframe>
  </div>

  <script>
    // === Starfield animation code unchanged ===
    const canvas = document.getElementById('starsCanvas');
    const ctx = canvas.getContext('2d');
    let width, height;
    function resize() {
      width = window.innerWidth;
      height = window.innerHeight;
      canvas.width = width;
      canvas.height = height;
    }
    window.addEventListener('resize', resize);
    resize();

    class Star {
      constructor(x, y, size, speedX, speedY) {
        this.x = x;
        this.y = y;
        this.size = size;
        this.speedX = speedX;
        this.speedY = speedY;
        this.broken = false;
        this.particles = [];
      }
      update() {
        if (!this.broken) {
          this.x += this.speedX;
          this.y += this.speedY;
          if (this.x < 0) this.x = width;
          if (this.x > width) this.x = 0;
          if (this.y < 0) this.y = height;
          if (this.y > height) this.y = 0;
        } else {
          this.particles.forEach(p => p.update());
          this.particles = this.particles.filter(p => !p.done);
          if (this.particles.length === 0) return false;
        }
        return true;
      }
      draw() {
        if (!this.broken) {
          ctx.fillStyle = 'white';
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          ctx.fill();
        } else {
          this.particles.forEach(p => p.draw());
        }
      }
      break() {
        if (this.broken) return;
        this.broken = true;
        const count = 8 + Math.floor(Math.random() * 5);
        for (let i = 0; i < count; i++) {
          const angle = (Math.PI * 2 / count) * i;
          const speed = Math.random() * 2 + 1;
          this.particles.push(new Particle(this.x, this.y, Math.random() * (this.size / 2), Math.cos(angle) * speed, Math.sin(angle) * speed));
        }
      }
    }

    class Particle {
      constructor(x, y, size, speedX, speedY) {
        this.x = x;
        this.y = y;
        this.size = size;
        this.speedX = speedX;
        this.speedY = speedY;
        this.life = 60;
        this.done = false;
      }
      update() {
        this.x += this.speedX;
        this.y += this.speedY;
        this.speedX *= 0.95;
        this.speedY *= 0.95;
        this.life--;
        if (this.life <= 0) this.done = true;
      }
      draw() {
        ctx.fillStyle = `rgba(255,255,255,${this.life / 60})`;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
      }
    }

    const stars = [];
    const STAR_COUNT = 80;
    for (let i = 0; i < STAR_COUNT; i++) {
      stars.push(new Star(Math.random() * width, Math.random() * height, 2.0, (Math.random() - 0.5) * 0.3, (Math.random() - 0.5) * 0.3));
    }
    function animate() {
      ctx.clearRect(0, 0, width, height);
      for (let i = stars.length - 1; i >= 0; i--) {
        const alive = stars[i].update();
        if (!alive) stars.splice(i, 1);
      }
      stars.forEach(star => star.draw());
      requestAnimationFrame(animate);
    }
    canvas.addEventListener('click', e => {
      const rect = canvas.getBoundingClientRect();
      const mouseX = e.clientX - rect.left;
      const mouseY = e.clientY - rect.top;
      for (const star of stars) {
        if (!star.broken) {
          const dx = star.x - mouseX;
          const dy = star.y - mouseY;
          const dist = Math.sqrt(dx * dx + dy * dy);
          if (dist < 10) {
            star.break();
            break;
          }
        }
      }
    });
    animate();

    // === Section switching ===
    function showSection(section) {
      const titleContainer = document.getElementById('titleContainer');
      const gamesContainer = document.getElementById('gamesContainer');
      if (section === 'home') {
        titleContainer.classList.remove('hidden');
        gamesContainer.style.display = 'none';
      } else if (section === 'games') {
        titleContainer.classList.add('hidden');
        gamesContainer.style.display = 'flex';
      } else {
        titleContainer.classList.add('hidden');
        gamesContainer.style.display = 'none';
      }
    }

    // === Games list ===
    const games = [
      { name: "Basket ball random", image: "https://imgs.crazygames.com/basket-random_16x9/20240617090207/basket-random_16x9-cover?metadata=none&quality=70&width=618", url: "https://static.playunblocked.com/2020/05/basket-random/" },
      { name: "Drift Boss", image: "https://imgs.crazygames.com/games/drift-boss/cover_16x9-1732741931008.png?metadata=none&quality=70&width=618", url: "https://html5.gamedistribution.com/0a8b51e5eaee42e7b4db83ca00afc92e/?gd_sdk_referrer_url=https://gamedistribution.com/games/drift-boss/" },
      { name: "Eaglercraft", image: "https://assets.nintendo.eu/image/upload/f_auto,c_limit,w_992,q_auto:low/MNS/NOE/70010000000963/SQ_NSwitch_Minecraft", url: "https://eaglecraft.pages.dev/" },
      { name: "1v1.LOL", image: "https://imgs.crazygames.com/games/1v1-lol/cover-1585728351086.png?metadata=none&quality=70&width=618", url: "https://1v1.lol/" },
      { name: "slope", image: "https://forum.y8.com/uploads/default/original/2X/1/1ee17b4ce90101ffcaf17c246dc5c1adeb7b0b61.jpeg", url: "https://slope4classroom.com/" },
      { name: "Territorial.io", image: "https://www.dexerto.com/cdn-image/wp-content/uploads/2022/05/12/territorial-io-cover.jpg?width=768&quality=60&format=auto", url: "https://territorial.io/" },
      { name: "Paper.io 2", image: "https://play-lh.googleusercontent.com/SWTpYqsX9RN2YirCDnAjQ8qsbgn4UrHkRRGsjwuASnHMVqssIvWKzq82mP82y_ffBSE=w240-h480-rw", url: "https://games.voodoo.io/paperio2" },
      { name: "10 minutes till dawn", image: "https://imgs.crazygames.com/games/10-minutes-till-dawn/cover-1652811077990.png?metadata=none&quality=70&width=618", url: "https://nexusapp.neocities.org/moderngame/projects/10-minutes-till-dawn/" },
      { name: "Basketball Stars", image: "https://imgs.crazygames.com/games/basketball-stars-2019/cover-1583231506155.png?metadata=none&quality=70&width=618", url: "https://igre.games/basketball-stars/fullscreen/" },
      { name: "Deadshot.io", image: "https://imgs.crazygames.com/games/deadshot-io/cover_16x9-1694770506842.png?metadata=none&quality=70&width=618", url: "https://deadshot.io/" },
      { name: "Boxing random", image: "https://play-lh.googleusercontent.com/ZuMoNX6xiIBRwdtSLi_JLyqKBT5JK-68TwhG56WIPF5FStzDtOrEJUSiSGTna0Ul_UYE", url: "https://html5.gamedistribution.com/2021/04/01/boxing-random/163350/" },
      { name: "soccer random", image: "https://play-lh.googleusercontent.com/8esBqZBSLjcdjFCz5tbpl2krim0pIBrELbhXFMvQVWqAYqCyTGJuGMBBC_nGkfH-qTg", url: "https://html5.gamedistribution.com/2021/04/01/soccer-random/163355/" }
    ];

    const gamesContainer = document.getElementById('gamesContainer');
    function loadGames() {
      gamesContainer.innerHTML = '';
      for (const game of games) {
        const box = document.createElement('div');
        box.className = 'gameBox';
        box.innerHTML = `
          <img src="${game.image}" alt="${game.name}" class="gameImage" />
          <div class="gameTitle">${game.name}</div>
        `;
        box.onclick = () => {
          openGame(game.url);
        };
        gamesContainer.appendChild(box);
      }
    }
    loadGames();

    function openGame(url) {
      const viewer = document.getElementById('gameViewer');
      const iframe = document.getElementById('gameFrame');
      iframe.src = url;
      viewer.style.display = 'block';
    }
    function closeGame() {
      const viewer = document.getElementById('gameViewer');
      const iframe = document.getElementById('gameFrame');
      iframe.src = '';
      viewer.style.display = 'none';
    }

    // === Typing animation for the title ===
    const titleText = '𝑯𝑨𝒁𝒁𝑺 𝑷𝑹𝑶𝑿𝒀';
    const mainTitle = document.getElementById('mainTitle');
    let idx = 0;

    function typeTitle() {
      if (idx < titleText.length) {
        mainTitle.textContent += titleText.charAt(idx);
        idx++;
        setTimeout(typeTitle, 150);
      }
    }

    // Start typing animation on page load
    window.onload = () => {
      mainTitle.textContent = '';
      typeTitle();
    };

    // === Search Bar Functionality ===
    const searchBar = document.querySelector('.searchBar');
    
    // Add event listener for Enter key
    searchBar.addEventListener('keydown', function(event) {
      if (event.key === 'Enter') {
        handleSearch(this.value.trim());
      }
    });

    function handleSearch(input) {
      if (!input) return; // Don't do anything for empty input
      
      // Add visual feedback
      searchBar.classList.add('searching');
      
      if (isValidURL(input)) {
        // Direct URL navigation - add https:// if no protocol specified
        let url = input;
        if (!input.startsWith('http://') && !input.startsWith('https://')) {
          url = 'https://' + input;
        }
        openGame(url);
      } else {
        // Web search using Google
        const searchQuery = encodeURIComponent(input);
        const googleSearchURL = `https://www.google.com/search?q=${searchQuery}`;
        openGame(googleSearchURL);
      }
      
      // Clear the search bar and remove visual feedback after a short delay
      setTimeout(() => {
        searchBar.value = '';
        searchBar.classList.remove('searching');
      }, 500);
    }

    function isValidURL(string) {
      // Check if it starts with http:// or https://
      if (string.startsWith('http://') || string.startsWith('https://')) {
        return true;
      }
      
      // Check if it looks like a domain (contains a dot and no spaces)
      if (string.includes('.') && !string.includes(' ') && string.length > 3) {
        // Extract domain part (before first slash if any)
        const parts = string.split('/');
        const domain = parts[0];
        
        // Basic domain validation - must have at least one dot and valid characters
        const domainPattern = /^[a-zA-Z0-9][a-zA-Z0-9.-]*[a-zA-Z0-9]\.[a-zA-Z]{2,}$/;
        
        // Also allow simple patterns like "example.com" or "subdomain.example.com"
        if (domainPattern.test(domain) || 
            (domain.split('.').length >= 2 && domain.split('.').every(part => part.length > 0))) {
          return true;
        }
      }
      
      return false;
    }
  </script>
</body>
</html>
